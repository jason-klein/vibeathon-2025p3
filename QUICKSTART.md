# ReferHarmony - Quick Start Guide

This guide will help you get ReferHarmony up and running quickly for both development and production.

## Table of Contents

1. [Local Development Setup](#local-development-setup)
2. [Quick Production Deploy](#quick-production-deploy)
3. [Testing the Application](#testing-the-application)
4. [Next Steps](#next-steps)

---

## Local Development Setup

### Prerequisites

- PHP 8.4+
- Composer
- Node.js 18+ and npm
- SQLite (included with PHP)

### Installation Steps

1. **Clone the repository**

```bash
git clone <repository-url>
cd referharmony
```

2. **Install dependencies**

```bash
composer install
npm install
```

3. **Set up environment**

```bash
cp .env.example .env
php artisan key:generate
```

4. **Create and set up database**

```bash
touch database/database.sqlite
php artisan migrate
```

5. **Seed sample data (optional)**

```bash
php artisan db:seed
```

6. **Build frontend assets**

```bash
npm run dev
```

(For production build: `npm run build`)

7. **Create storage symlink**

```bash
php artisan storage:link
```

8. **Start the development server**

In one terminal:
```bash
php artisan serve
```

The application will be available at http://localhost:8000

9. **Create your first user**

Visit http://localhost:8000 and click "Register" to create your account. A patient record will be automatically created.

### Optional: Generate Sample Healthcare Data

To test the full functionality with realistic healthcare encounters:

1. **Set up OpenAI API key** (required for AI summaries)

Add to your `.env` file:
```
OPENAI_API_KEY=sk-your-key-here
```

2. **Generate sample encounters**

```bash
# First, get your patient ID
php artisan tinker
>>> $patient = App\Models\Patient::first();
>>> $patient->id;

# Generate a sample healthcare encounter
php artisan mock:healthcare-encounter {patient_id}
```

This will create:
- A past appointment (2 weeks ago)
- A professional PDF visit summary
- Referral tasks (e.g., "Schedule Cardiology appointment")
- A follow-up appointment
- AI-generated Plain English Patient Record
- AI-generated Executive Summary

---

## Quick Production Deploy

### Prerequisite

- Laravel Cloud account (https://cloud.laravel.com)
- Git repository (GitHub, GitLab, or Bitbucket)

### Deployment Steps

1. **Prepare environment variables**

Copy the following minimum required variables to Laravel Cloud Environment settings:

```bash
APP_NAME=ReferHarmony
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com

# Will be generated by Laravel Cloud
APP_KEY=

# Email (choose one service)
MAIL_MAILER=smtp
MAIL_HOST=smtp.yourprovider.com
MAIL_PORT=587
MAIL_USERNAME=your-email
MAIL_PASSWORD=your-password
MAIL_FROM_ADDRESS=noreply@referharmony.com
MAIL_FROM_NAME=ReferHarmony

# Logging
LOG_CHANNEL=production
LOG_LEVEL=error
LOG_DAILY_DAYS=14

# OpenAI for AI features
OPENAI_API_KEY=sk-your-key-here

# Database (if using MySQL instead of SQLite)
# DB_CONNECTION=mysql
# DB_HOST=your-database-host
# DB_DATABASE=referharmony
# DB_USERNAME=your-username
# DB_PASSWORD=your-password
```

2. **Configure deployment settings in Laravel Cloud**

- **Build Command:** `npm ci && npm run build`
- **Deploy Command:** `php artisan migrate --force && php artisan storage:link`

3. **Deploy**

Click "Deploy" in Laravel Cloud dashboard and monitor the deployment logs.

4. **Post-deployment verification**

- Visit your production URL
- Test user registration
- Test login
- Test password reset
- Create a test appointment
- Verify dashboard displays correctly

---

## Testing the Application

### Run All Tests

```bash
php artisan test
```

Expected result: **142 tests passing**

### Run Specific Test Suite

```bash
# Feature tests only
php artisan test --testsuite=Feature

# Unit tests only
php artisan test --testsuite=Unit

# Specific test file
php artisan test tests/Feature/DashboardTest.php

# Filter by test name
php artisan test --filter=dashboard
```

### Code Quality Check

```bash
# Run Laravel Pint for code formatting
vendor/bin/pint

# Check without making changes
vendor/bin/pint --test
```

---

## Next Steps

### For Development

1. **Review the MVP Plan**
   - See `docs/mvp-plan.md` for complete feature specifications
   - All 13 milestones have been completed

2. **Explore the Codebase**
   - Models: `app/Models/`
   - Livewire components: `resources/views/livewire/`
   - Routes: `routes/web.php`
   - Tests: `tests/Feature/` and `tests/Unit/`

3. **Customize the Application**
   - Update branding in `.env` (`APP_NAME`)
   - Modify email templates in `resources/views/emails/` (if customized)
   - Add additional seeders for your healthcare partners/providers

### For Production

1. **Read the Deployment Guide**
   - See `docs/DEPLOYMENT.md` for comprehensive deployment instructions
   - Follow security best practices
   - Set up monitoring and backups

2. **Configure Production Services**
   - Set up email service (Mailgun, AWS SES, Postmark, or SMTP)
   - Configure file storage (S3 recommended for scalability)
   - Set up error monitoring (Sentry, Bugsnag, or Slack alerts)

3. **Performance Optimization**
   - Enable caching (Redis recommended)
   - Configure CDN for static assets
   - Set up database backups

4. **Security Checklist**
   - Ensure `APP_DEBUG=false`
   - Enable HTTPS
   - Configure proper CORS settings
   - Set up rate limiting (already configured)
   - Review and update allowed file upload types

---

## Common Commands

### Development

```bash
# Start dev server
php artisan serve

# Watch for frontend changes
npm run dev

# Clear all caches
php artisan optimize:clear

# View routes
php artisan route:list

# Interactive shell
php artisan tinker
```

### Database

```bash
# Run migrations
php artisan migrate

# Rollback last migration
php artisan migrate:rollback

# Fresh database (WARNING: deletes all data)
php artisan migrate:fresh --seed

# Seed database
php artisan db:seed
```

### Production

```bash
# Build frontend assets
npm run build

# Cache configuration
php artisan config:cache

# Cache routes
php artisan route:cache

# Cache views
php artisan view:cache

# Clear all caches
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear
```

---

## Troubleshooting

### Issue: 500 Error

**Solution:**
```bash
php artisan key:generate
chmod -R 775 storage bootstrap/cache
```

### Issue: CSS/JS not loading

**Solution:**
```bash
npm run build
php artisan view:clear
```

### Issue: Database connection error

**Solution:**
- Verify `.env` database settings
- For SQLite, ensure `database/database.sqlite` exists
- Check file permissions

### Issue: Email not sending

**Solution:**
- Verify `MAIL_*` settings in `.env`
- Test with: `php artisan tinker` then `Mail::raw('test', fn($m) => $m->to('test@example.com')->subject('Test'));`

### Issue: File uploads failing

**Solution:**
```bash
php artisan storage:link
chmod -R 775 storage
```

---

## Support

### Documentation

- **MVP Plan:** `docs/mvp-plan.md`
- **Deployment Guide:** `docs/DEPLOYMENT.md`
- **Laravel Docs:** https://laravel.com/docs/12.x
- **Livewire Docs:** https://livewire.laravel.com
- **Flux UI Docs:** https://fluxui.dev

### Getting Help

1. Check application logs: `storage/logs/laravel.log`
2. Use Laravel Boost tools (in development):
   - `php artisan list` - See all available commands
   - `php artisan tinker` - Interactive debugging
3. Review test suite for usage examples

---

## Application Features

### Patient Portal
- ✅ Dashboard with upcoming appointments and tasks
- ✅ Appointment management (create, view, edit, delete)
- ✅ Document upload and management
- ✅ Task tracking with completion status
- ✅ Healthcare encounter timeline
- ✅ AI-generated health summaries
- ✅ Community events feed
- ✅ Provider scheduling workflow

### Technical Features
- ✅ Laravel 12 with Livewire Volt
- ✅ Flux UI components
- ✅ TailwindCSS v4
- ✅ SQLite database (MySQL/PostgreSQL supported)
- ✅ Laravel Fortify authentication
- ✅ OpenAI integration for AI summaries
- ✅ DomPDF for document generation
- ✅ Comprehensive test suite (142 tests)
- ✅ Mobile-responsive design

---

**Version:** 1.0
**Last Updated:** 2025-11-09
**Status:** Production Ready
